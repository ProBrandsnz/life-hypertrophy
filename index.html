<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hypertrophy OS - Anthony's Complete Transformation System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background-color: #f5f0e6; min-height: 100vh; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%); padding: 30px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; }
        .header h1 { color: #ea580c; font-size: 2.5rem; margin-bottom: 10px; font-weight: 800; }
        .header p { color: #9a3412; font-size: 1.1rem; font-weight: 500; }
        .card { background: white; padding: 25px; border-radius: 15px; margin-bottom: 25px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn { background: #ea580c; color: white; border: none; padding: 14px 28px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600; width: 100%; margin-top: 12px; transition: all 0.3s ease; }
        .btn:hover { background: #dc2626; }
        .btn-blue { background: #2563eb; }
        .btn-green { background: #16a34a; }
        .btn-small { width: auto; padding: 8px 16px; font-size: 14px; }
        .nav-tabs { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 25px; }
        .nav-tab { padding: 12px 20px; background: #e5e7eb; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; }
        .nav-tab.active { background: #ea580c; color: white; }
        .hidden { display: none; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 25px; }
        .progress-bar { width: 100%; height: 10px; background: #e5e7eb; border-radius: 5px; margin-top: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: #16a34a; border-radius: 5px; transition: width 0.5s ease; }
        .progress-fill.blue { background: #2563eb; }
        .progress-fill.purple { background: #9333ea; }
        .input-field { width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 16px; margin-bottom: 15px; }
        .input-field:focus { outline: none; border-color: #ea580c; }
        .textarea-field { width: 100%; padding: 12px 16px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 16px; margin-bottom: 15px; resize: vertical; min-height: 100px; }
        .textarea-field:focus { outline: none; border-color: #ea580c; }
        .flame-alert { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 6px solid #f59e0b; padding: 20px; border-radius: 10px; margin-bottom: 25px; }
        .flame-title { color: #92400e; font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; }
        .flame-text { color: #b45309; font-size: 1rem; margin-bottom: 15px; }
        .focus-statement { font-style: italic; background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); padding: 20px; border-radius: 10px; border-left: 4px solid #ea580c; margin: 20px 0; line-height: 1.7; }
        .statement-card { background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); padding: 20px; border-radius: 10px; border-left: 4px solid #ea580c; margin: 15px 0; }
        .statement-title { color: #ea580c; font-weight: bold; font-size: 1.1rem; margin-bottom: 10px; }
        .statement-text { color: #374151; line-height: 1.6; }
        .meal-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 10px; padding: 20px; margin-bottom: 15px; }
        .food-item { background: white; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #e5e7eb; }
        .food-item h5 { color: #374151; margin-bottom: 8px; }
        .food-details { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px; }
        .protein-value { color: #16a34a; font-weight: 600; }
        .exercise-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 10px; padding: 20px; margin-bottom: 15px; }
        .set-tracker { display: flex; gap: 10px; align-items: center; margin: 10px 0; }
        .set-input { width: 80px; padding: 8px; border: 1px solid #d1d5db; border-radius: 5px; text-align: center; }
        .exercise-complete { background: #f0fdf4; border-color: #16a34a; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî• Hypertrophy OS</h1>
            <p>Walking Towards the Flames - Your Complete Transformation Protocol</p>
            <div style="margin-top: 15px; font-size: 0.9rem; color: #7c2d12;">
                <strong>Today:</strong> <span id="current-date"></span>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showView('dashboard')">üè† Dashboard</button>
            <button class="nav-tab" onclick="showView('statements')">üìú Daily Reading</button>
            <button class="nav-tab" onclick="showView('morning')">üåÖ Morning</button>
            <button class="nav-tab" onclick="showView('evening')">üåô Evening</button>
            <button class="nav-tab" onclick="showView('nutrition')">üçé Nutrition</button>
            <button class="nav-tab" onclick="showView('training')">üí™ Training</button>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard-view">
            <div class="grid">
                <div class="card" style="border: 3px solid #9333ea; background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);">
                    <h3>üìú Daily Reading</h3>
                    <p>Your 7 Statements of Intent</p>
                    <div>Status: <span id="reading-status">Not Started</span></div>
                    <button class="btn" style="background: #9333ea;" onclick="showView('statements')">üìñ Read Daily Statements</button>
                </div>
                <div class="card" style="border: 3px solid #ea580c; background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);">
                    <h3>üåÖ Morning Ritual</h3>
                    <p>Tim's 18 Questions & Flame Identification</p>
                    <div>Status: <span id="morning-status">Pending</span></div>
                    <button class="btn" onclick="showView('morning')">üî• Start Morning Practice</button>
                </div>
                <div class="card" style="border: 3px solid #2563eb; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);">
                    <h3>üåô Evening Ritual</h3>
                    <p>6 Reflections & Performance Scoring</p>
                    <div>Status: <span id="evening-status">Pending</span></div>
                    <button class="btn btn-blue" onclick="showView('evening')">üß† Start Evening Practice</button>
                </div>
            </div>

            <div class="card">
                <h3>Today's Performance</h3>
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3.5rem; font-weight: 900; color: #374151; margin-bottom: 5px;" id="average-score">0.0/5</div>
                    <p style="color: #6b7280;">Daily Average</p>
                </div>
            </div>

            <div class="grid">
                <div class="card">
                    <h4>üéØ Weight Goal</h4>
                    <div style="font-size: 2rem; font-weight: 900; color: #374151; margin: 8px 0;" id="current-weight">105kg</div>
                    <div style="color: #6b7280; margin-bottom: 8px;">Target: 98kg</div>
                    <div class="progress-bar">
                        <div class="progress-fill blue" id="weight-progress" style="width: 0%"></div>
                    </div>
                    <input type="number" class="input-field" id="weight-input" value="105" onchange="updateWeight()" placeholder="Current weight">
                </div>

                <div class="card">
                    <h4>üçé Protein Today</h4>
                    <div style="font-size: 2rem; font-weight: 900; color: #374151; margin: 8px 0;" id="protein-display">0g</div>
                    <div style="color: #6b7280; margin-bottom: 8px;">Target: 265.8g</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="protein-progress" style="width: 0%"></div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" class="input-field" id="protein-input" value="0" onchange="updateProtein()" placeholder="Protein" style="width: 60%;">
                        <button class="btn btn-green btn-small" onclick="addProtein(25)">+25g</button>
                    </div>
                </div>

                <div class="card">
                    <h4>üí∞ Thailand Fund</h4>
                    <div style="font-size: 2rem; font-weight: 900; color: #374151; margin: 8px 0;" id="thailand-display">$45,000</div>
                    <div style="color: #6b7280; margin-bottom: 8px;">Target: $150,000</div>
                    <div class="progress-bar">
                        <div class="progress-fill purple" id="thailand-progress" style="width: 30%"></div>
                    </div>
                    <input type="number" class="input-field" id="thailand-input" value="45000" onchange="updateThailand()" placeholder="Thailand fund">
                </div>
            </div>

            <div class="flame-alert" id="flame-alert">
                <div class="flame-title">üî• Flame Alert</div>
                <div class="flame-text" id="flame-message">You chose comfort over growth today. What flame will you walk towards?</div>
                <button class="btn" onclick="showRecalibration()">Walk Towards Flame</button>
            </div>

            <div class="card" id="flame-display" style="display: none;">
                <h3>üî• Today's Flame</h3>
                <div style="font-size: 1.1rem; color: #ea580c; font-weight: 600; margin: 10px 0;" id="current-flame-text"></div>
                <div style="color: #6b7280; font-size: 0.9rem;">The challenge you committed to walk towards today</div>
            </div>

            <div class="card" style="background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border: 2px solid #9333ea;">
                <h3>üìä Export Data for Claude Analysis</h3>
                <p>Download your transformation data for weekly coaching sessions</p>
                <button class="btn" style="background: #9333ea;" onclick="exportData()">üìÅ Export Data for Claude</button>
            </div>
        </div>

        <!-- Morning Ritual View -->
        <div id="morning-view" class="hidden">
            <div class="card">
                <h2>üåÖ Morning Ritual - Tim's 18 Questions</h2>
                
                <div style="background: #f3f4f6; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Question <span id="question-number">1</span> of 18</span>
                        <span id="question-percentage">6%</span>
                    </div>
                    <div style="width: 100%; height: 6px; background: #e5e7eb; border-radius: 3px; overflow: hidden; margin-top: 8px;">
                        <div style="height: 100%; background: #ea580c; border-radius: 3px; transition: width 0.3s ease;" id="question-progress"></div>
                    </div>
                </div>

                <div class="card" style="background: #f9fafb;">
                    <h4 id="current-question">Today's message to myself</h4>
                    <textarea class="textarea-field" id="morning-answer" placeholder="Your response..."></textarea>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-blue" onclick="previousQuestion()" id="prev-btn">‚Üê Previous</button>
                        <button class="btn" onclick="nextQuestion()" id="next-btn">Next ‚Üí</button>
                    </div>
                </div>

                <div class="card" id="flame-identification" style="display: none; background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%); border: 2px solid #ea580c;">
                    <h3>üî• Identify Your Flame</h3>
                    <p style="color: #9a3412; margin-bottom: 15px;">What flame will you walk towards today? What challenge will you face instead of avoiding?</p>
                    <input type="text" class="input-field" id="flame-input" placeholder="The specific challenge or difficult conversation I'll face today...">
                    <button class="btn" onclick="completeMorning()" id="complete-morning-btn">üî• Complete Morning Ritual</button>
                </div>

                <div class="card" id="send-to-tim" style="display: none; background: linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%); border: 2px solid #2563eb;">
                    <h3>üìß Send Answers to Tim</h3>
                    <p style="color: #1e40af; margin-bottom: 15px;">Your morning reflection is complete! Send your answers to Tim for coaching feedback.</p>
                    <button class="btn btn-blue" onclick="sendMorningToTim()">üì§ Send Morning Answers to Tim</button>
                </div>
            </div>
        </div>

        <!-- Evening Ritual View -->
        <div id="evening-view" class="hidden">
            <div class="card">
                <h2>üåô Evening Ritual - Reflection & Growth</h2>
                
                <div class="card" style="background: #f9fafb;">
                    <h3>Tim's 6 Reflection Questions</h3>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">A moment that I really appreciated today was...</label>
                        <textarea class="textarea-field" id="reflection1" placeholder="Your reflection..."></textarea>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">A situation or task I handled well today was...</label>
                        <textarea class="textarea-field" id="reflection2" placeholder="Your reflection..."></textarea>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Something I realised or learned today was...</label>
                        <textarea class="textarea-field" id="reflection3" placeholder="Your reflection..."></textarea>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">I could have made today even better if I...</label>
                        <textarea class="textarea-field" id="reflection4" placeholder="Your reflection..."></textarea>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Something that could have helped me feel more connected...</label>
                        <textarea class="textarea-field" id="reflection5" placeholder="Your reflection..."></textarea>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">If I was my own performance coach, I would tell myself...</label>
                        <textarea class="textarea-field" id="reflection6" placeholder="Your reflection..."></textarea>
                    </div>
                </div>

                <div class="card" style="background: #f0f9ff;">
                    <h3>Performance Domains (1-5 scale)</h3>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">CLARITY - I knew my 'why' and lived intentionally today</label>
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button onclick="setScore('clarity', 1)" class="score-btn" data-domain="clarity" data-score="1" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">1</button>
                            <button onclick="setScore('clarity', 2)" class="score-btn" data-domain="clarity" data-score="2" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">2</button>
                            <button onclick="setScore('clarity', 3)" class="score-btn" data-domain="clarity" data-score="3" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">3</button>
                            <button onclick="setScore('clarity', 4)" class="score-btn" data-domain="clarity" data-score="4" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">4</button>
                            <button onclick="setScore('clarity', 5)" class="score-btn" data-domain="clarity" data-score="5" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">5</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">ENERGY - I managed my physical and mental energy well today</label>
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button onclick="setScore('energy', 1)" class="score-btn" data-domain="energy" data-score="1" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">1</button>
                            <button onclick="setScore('energy', 2)" class="score-btn" data-domain="energy" data-score="2" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">2</button>
                            <button onclick="setScore('energy', 3)" class="score-btn" data-domain="energy" data-score="3" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">3</button>
                            <button onclick="setScore('energy', 4)" class="score-btn" data-domain="energy" data-score="4" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">4</button>
                            <button onclick="setScore('energy', 5)" class="score-btn" data-domain="energy" data-score="5" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">5</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">NECESSITY - I felt it was necessary to be my best</label>
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button onclick="setScore('necessity', 1)" class="score-btn" data-domain="necessity" data-score="1" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">1</button>
                            <button onclick="setScore('necessity', 2)" class="score-btn" data-domain="necessity" data-score="2" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">2</button>
                            <button onclick="setScore('necessity', 3)" class="score-btn" data-domain="necessity" data-score="3" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">3</button>
                            <button onclick="setScore('necessity', 4)" class="score-btn" data-domain="necessity" data-score="4" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">4</button>
                            <button onclick="setScore('necessity', 5)" class="score-btn" data-domain="necessity" data-score="5" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">5</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">PRODUCTIVITY - I worked on things that mattered most</label>
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button onclick="setScore('productivity', 1)" class="score-btn" data-domain="productivity" data-score="1" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">1</button>
                            <button onclick="setScore('productivity', 2)" class="score-btn" data-domain="productivity" data-score="2" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">2</button>
                            <button onclick="setScore('productivity', 3)" class="score-btn" data-domain="productivity" data-score="3" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">3</button>
                            <button onclick="setScore('productivity', 4)" class="score-btn" data-domain="productivity" data-score="4" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">4</button>
                            <button onclick="setScore('productivity', 5)" class="score-btn" data-domain="productivity" data-score="5" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">5</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">INFLUENCE - I guided or treated others well today</label>
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button onclick="setScore('influence', 1)" class="score-btn" data-domain="influence" data-score="1" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">1</button>
                            <button onclick="setScore('influence', 2)" class="score-btn" data-domain="influence" data-score="2" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">2</button>
                            <button onclick="setScore('influence', 3)" class="score-btn" data-domain="influence" data-score="3" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">3</button>
                            <button onclick="setScore('influence', 4)" class="score-btn" data-domain="influence" data-score="4" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">4</button>
                            <button onclick="setScore('influence', 5)" class="score-btn" data-domain="influence" data-score="5" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">5</button>
                        </div>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">COURAGE - I shared my real self, thoughts, and feelings</label>
                        <div style="display: flex; gap: 8px; justify-content: center;">
                            <button onclick="setScore('courage', 1)" class="score-btn" data-domain="courage" data-score="1" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">1</button>
                            <button onclick="setScore('courage', 2)" class="score-btn" data-domain="courage" data-score="2" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">2</button>
                            <button onclick="setScore('courage', 3)" class="score-btn" data-domain="courage" data-score="3" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">3</button>
                            <button onclick="setScore('courage', 4)" class="score-btn" data-domain="courage" data-score="4" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">4</button>
                            <button onclick="setScore('courage', 5)" class="score-btn" data-domain="courage" data-score="5" style="width: 45px; height: 45px; border: 2px solid #d1d5db; background: white; border-radius: 50%; cursor: pointer; font-weight: bold;">5</button>
                        </div>
                    </div>
                </div>

                <div class="card" id="flame-reflection" style="display: none; background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%); border: 2px solid #ea580c;">
                    <h3>üî• Flame Reflection</h3>
                    <div style="margin-bottom: 15px;">
                        <strong>Today's flame:</strong> <span id="evening-flame-text" style="color: #ea580c;"></span>
                    </div>
                    <textarea class="textarea-field" id="flame-reflection-text" placeholder="Did you walk towards this flame? What did you learn?"></textarea>
                </div>

                <button class="btn btn-blue" onclick="completeEvening()">üåô Complete Evening Ritual</button>

                <div class="card" id="send-evening-to-tim" style="display: none; background: linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%); border: 2px solid #2563eb;">
                    <h3>üìß Send Evening Reflection to Tim</h3>
                    <p style="color: #1e40af; margin-bottom: 15px;">Your evening reflection is complete! Send your answers and performance scores to Tim.</p>
                    <button class="btn btn-blue" onclick="sendEveningToTim()">üì§ Send Evening Reflection to Tim</button>
                </div>
            </div>
        </div>

        <!-- Nutrition View -->
        <div id="nutrition-view" class="hidden">
            <div class="card">
                <h2>üçé Nutrition Mastery</h2>
                
                <div class="card" style="background: #f0f9ff;">
                    <h3>Day Type Configuration</h3>
                    <button class="btn" id="day-toggle" onclick="toggleDayType()">üèãÔ∏è Training Day</button>
                    <div style="margin-top: 15px; color: #374151;" id="nutrition-targets">
                        Calories: 2,476 | Protein: 265.8g | Carbs: 274.4g | Fat: 43.8g
                    </div>
                </div>

                <div class="card">
                    <h3>Your Exact Meal Plan</h3>
                    
                    <div class="meal-card">
                        <h4>ü•£ Breakfast (520 calories, 37.2g protein)</h4>
                        <div class="food-item">
                            <h5>Quick Oats</h5>
                            <div class="food-details"><span>Serving:</span><span id="oats-serving">80g</span></div>
                            <div class="food-details"><span>Calories:</span><span>304</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">10.4g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Blueberries</h5>
                            <div class="food-details"><span>Serving:</span><span>100g</span></div>
                            <div class="food-details"><span>Calories:</span><span>52</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">0.6g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>NZ Muscle Whey Protein</h5>
                            <div class="food-details"><span>Serving:</span><span>30g</span></div>
                            <div class="food-details"><span>Calories:</span><span>118</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">22.4g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Psyllium Husk + Calci-Trim Milk</h5>
                            <div class="food-details"><span>Calories:</span><span>46</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">3.8g</span></div>
                        </div>
                        <button class="btn btn-green" onclick="addProtein(37.2)">‚úì Log Breakfast (+37.2g)</button>
                    </div>

                    <div class="meal-card">
                        <h4>üçó Lunch (885 calories, 87.6g protein)</h4>
                        <div class="food-item">
                            <h5>Cooked Chicken Breast</h5>
                            <div class="food-details"><span>Serving:</span><span>200g</span></div>
                            <div class="food-details"><span>Calories:</span><span>330</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">62g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Cooked White Rice</h5>
                            <div class="food-details"><span>Serving:</span><span>250g</span></div>
                            <div class="food-details"><span>Calories:</span><span>325</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">6.8g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Steamed Broccoli</h5>
                            <div class="food-details"><span>Serving:</span><span>100g</span></div>
                            <div class="food-details"><span>Calories:</span><span>28</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">2.3g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Canned Pineapple + Chobani Yogurt</h5>
                            <div class="food-details"><span>Calories:</span><span>202</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">16.5g</span></div>
                        </div>
                        <button class="btn btn-green" onclick="addProtein(87.6)">‚úì Log Lunch (+87.6g)</button>
                    </div>

                    <div class="meal-card">
                        <h4>ü•ò Dinner (624 calories, 72.9g protein)</h4>
                        <div class="food-item">
                            <h5>Cooked Chicken Breast</h5>
                            <div class="food-details"><span>Serving:</span><span>200g</span></div>
                            <div class="food-details"><span>Calories:</span><span>330</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">62g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Cooked Potato (no oil)</h5>
                            <div class="food-details"><span>Serving:</span><span id="potato-serving">200g</span></div>
                            <div class="food-details"><span>Calories:</span><span>190</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">5g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Mixed Vegetables + Steamed Broccoli</h5>
                            <div class="food-details"><span>Serving:</span><span>230g</span></div>
                            <div class="food-details"><span>Calories:</span><span>104</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">5.9g</span></div>
                        </div>
                        <button class="btn btn-green" onclick="addProtein(72.9)">‚úì Log Dinner (+72.9g)</button>
                    </div>

                    <div class="meal-card">
                        <h4>ü•ú Snacks (585 calories, 68.1g protein)</h4>
                        <div class="food-item">
                            <h5>Wholemeal Snack Wrap</h5>
                            <div class="food-details"><span>Serving:</span><span>1 wrap</span></div>
                            <div class="food-details"><span>Calories:</span><span>89</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">4.5g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Medium Eggs</h5>
                            <div class="food-details"><span>Serving:</span><span>2 eggs</span></div>
                            <div class="food-details"><span>Calories:</span><span>130</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">11.1g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Liquid Egg White</h5>
                            <div class="food-details"><span>Serving:</span><span>180g</span></div>
                            <div class="food-details"><span>Calories:</span><span>84</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">20.1g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>NZ Muscle Whey Protein</h5>
                            <div class="food-details"><span>Serving:</span><span>20g</span></div>
                            <div class="food-details"><span>Calories:</span><span>81</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">15.3g</span></div>
                        </div>
                        <div class="food-item">
                            <h5>Chobani Greek Yogurt + Frozen Mango</h5>
                            <div class="food-details"><span>Serving:</span><span>210g</span></div>
                            <div class="food-details"><span>Calories:</span><span>201</span></div>
                            <div class="food-details"><span>Protein:</span><span class="protein-value">17.1g</span></div>
                        </div>
                        <button class="btn btn-green" onclick="addProtein(68.1)">‚úì Log Snacks (+68.1g)</button>
                    </div>
                </div>

                <div class="flame-alert" id="nutrition-flame" style="display: none;">
                    <div class="flame-title">üî• Protein Flame Alert</div>
                    <div class="flame-text">Your discipline chose <span id="current-protein-amount">0</span>g over 265.8g today. Someone who honors their body completes their protein.</div>
                    <button class="btn btn-small" onclick="addProtein(25)">Add Protein Shake (+25g)</button>
                </div>
            </div>
        </div>

        <!-- Daily Statements View -->
        <div id="statements-view" class="hidden">
            <div class="card">
                <h2>üìú Daily Reading - 7 Statements of Intent</h2>
                <p style="color: #6b7280; margin-bottom: 20px;">Read these every morning to align with your transformation</p>
                
                <div class="statement-card">
                    <div class="statement-title">1. Physical Foundation & Energy</div>
                    <div class="statement-text">Over the next 3 months, my mission is clear: to reach my ideal weight of 98kg, build lean muscle, live with unstoppable energy. I will optimize my hypertrophy training with intention‚Äîtraining to failure, tracking progress, staying disciplined. My nutrition will fuel performance, recovery, taking my vitality to new levels.</div>
                </div>

                <div class="statement-card">
                    <div class="statement-title">2. Nutrition & Energy Mastery</div>
                    <div class="statement-text">Today, I honour my body, feeding it with intention, momentum. Each meal is a reflection of discipline, self-respect, fueling performance, recovery, clarity. I choose foods that elevate my energy, sharpen my focus.</div>
                </div>

                <div class="statement-card">
                    <div class="statement-title">3. Relationships & Connections</div>
                    <div class="statement-text">Over the next 3 months I'll build on my progress. I'll lean deeper into connection based on character. I'll express love freely to those I trust‚Äîmale or female‚Äîbecause love is clarity, not confusion.</div>
                </div>

                <div class="statement-card">
                    <div class="statement-title">4. Mindset & Identity</div>
                    <div class="statement-text">Over the next 3 months I continue to train my mindset every day. Journaling, reflection, deliberate thinking help me unravel what's beneath the surface. I don't avoid fear‚ÄîI sit with it, come at it, walk towards it.</div>
                </div>

                <div class="statement-card">
                    <div class="statement-title">5. Precision Systems & Environmental Integrity</div>
                    <div class="statement-text">Over the next 3 months I refine the systems that support my rhythm. My tools, calendar, processes, space are intentional. I remove friction where it slows me down.</div>
                </div>

                <div class="statement-card">
                    <div class="statement-title">6. Business Liberation & Strategic Lifestyle Design</div>
                    <div class="statement-text">Over the next 3 months, I build ProBrands with financial clarity, emotional precision. My systems are clean, scalable. My delivery is seamless, trustworthy.</div>
                </div>

                <div class="statement-card">
                    <div class="statement-title">7. Financial Freedom & Worthiness</div>
                    <div class="statement-text">Over the next 3 months, I walk towards my money flames. Like hypertrophy - low and slow, constantly building, clear, concise, measured. I face my fear of failure by walking towards the flame instead of avoiding financial decisions.</div>
                </div>

                <div class="card" style="background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border: 2px solid #9333ea;">
                    <h3>‚úÖ Mark as Read</h3>
                    <p>Once you've read all 7 statements, mark them as complete for today</p>
                    <button class="btn" style="background: #9333ea;" onclick="completeReading()">üìñ Reading Complete</button>
                </div>
            </div>
        </div>

        <!-- Training View -->
        <div id="training-view" class="hidden">
            <div class="card">
                <h2>üí™ Training Tracker</h2>
                
                <div class="card" style="background: #f0f9ff;">
                    <h3>Your Weekly Training Split</h3>
                    <div class="grid">
                        <div style="background: #f9fafb; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Monday</h4>
                            <p>LOWER 1<br>13 working sets</p>
                        </div>
                        <div style="background: #fff7ed; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid #ea580c;">
                            <h4>Tuesday</h4>
                            <p>UPPER (PUSH)<br>14 working sets</p>
                        </div>
                        <div style="background: #f9fafb; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Wednesday</h4>
                            <p>UPPER (PULL)<br>13 working sets</p>
                        </div>
                        <div style="background: #f9fafb; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Thursday</h4>
                            <p>LOWER 2<br>9 working sets</p>
                        </div>
                        <div style="background: #f9fafb; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Friday</h4>
                            <p>UPPER<br>14 working sets</p>
                        </div>
                        <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; text-align: center;">
                            <h4>Weekend</h4>
                            <p>REST DAYS<br>Recovery</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Today's Workout: UPPER (PUSH)</h3>
                    
                    <div class="exercise-card" id="exercise-1">
                        <h4>Machine Chest Press</h4>
                        <p>Main: Chest | Secondary: Triceps</p>
                        <div style="color: #6b7280; margin: 10px 0;">6-10 Reps | 3 Working Sets</div>
                        <div class="set-tracker">
                            <span>Set 1:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex1-w1">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex1-r1">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(1, 1)">‚úì</button>
                        </div>
                        <div class="set-tracker">
                            <span>Set 2:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex1-w2">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex1-r2">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(1, 2)">‚úì</button>
                        </div>
                        <div class="set-tracker">
                            <span>Set 3:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex1-w3">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex1-r3">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(1, 3)">‚úì</button>
                        </div>
                    </div>

                    <div class="exercise-card" id="exercise-2">
                        <h4>Seated Machine Military Press</h4>
                        <p>Main: Delts | Secondary: Triceps</p>
                        <div style="color: #6b7280; margin: 10px 0;">6-10 Reps | 2 Working Sets</div>
                        <div class="set-tracker">
                            <span>Set 1:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex2-w1">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex2-r1">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(2, 1)">‚úì</button>
                        </div>
                        <div class="set-tracker">
                            <span>Set 2:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex2-w2">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex2-r2">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(2, 2)">‚úì</button>
                        </div>
                    </div>

                    <div class="exercise-card" id="exercise-3">
                        <h4>Standing Cable Lateral Raise</h4>
                        <p>Main: Delts (Lateral) | Secondary: Traps</p>
                        <div style="color: #6b7280; margin: 10px 0;">12-15 Reps | 3 Working Sets</div>
                        <div class="set-tracker">
                            <span>Set 1:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex3-w1">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex3-r1">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(3, 1)">‚úì</button>
                        </div>
                        <div class="set-tracker">
                            <span>Set 2:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex3-w2">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex3-r2">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(3, 2)">‚úì</button>
                        </div>
                        <div class="set-tracker">
                            <span>Set 3:</span>
                            <input type="number" class="set-input" placeholder="Weight" id="ex3-w3">
                            <span>kg x</span>
                            <input type="number" class="set-input" placeholder="Reps" id="ex3-r3">
                            <button class="btn btn-green btn-small" onclick="markSetComplete(3, 3)">‚úì</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Session Status</h3>
                    <button class="btn" id="training-btn" onclick="toggleTraining()">Complete Training Session</button>
                    <div class="flame-alert" id="training-flame">
                        <div class="flame-title">üî• Training Flame Alert</div>
                        <div class="flame-text">Your discipline chose comfort over growth today. Progressive overload requires consistency.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tim's complete 18 morning questions
        const morningQuestions = [
            "Today's message to myself",
            "Today's top 3 goals/priorities", 
            "Tasks that absolutely must be done today",
            "Person(s) I need to connect with today (and how to do it well)",
            "Write a paragraph mapping out your perfect day today",
            "Where am I winning at the moment?",
            "3 things I'm grateful for today are?",
            "Today I will let go of?",
            "One thing I can get excited about today is?",
            "If one word could describe the kind of person I want to be today, then that word is... and why I chose it is...",
            "Someone who needs me on my A Game today is...",
            "A situation that might stress me out today or trip me up today could be... And the way my best self would deal with it is...",
            "Someone I could surprise with a gift, note or a sign of appreciation is...",
            "One action I could take today to demonstrate excellence or real value",
            "One bold action I could take today is...",
            "If I was my own performance coach looking at my life from a high level, I would tell myself to remember that...",
            "The big projects I have to keep in mind that I want to take on, even if I can't act towards them today, are...",
            "I would know that today was a great success if at the end of the day I did or felt these things..."
        ];

        // Application state  
        let appData = {
            readingCompleted: false,
            morningCompleted: false,
            eveningCompleted: false,
            currentWeight: 105,
            proteinIntake: 0,
            trainingCompleted: false,
            thailandFund: 45000,
            currentFlame: '',
            dailyScores: { clarity: 0, energy: 0, necessity: 0, productivity: 0, influence: 0, courage: 0 },
            isTrainingDay: true,
            currentQuestionIndex: 0,
            morningAnswers: [],
            eveningReflections: [],
            flameReflection: '',
            exerciseData: {}
        };

        // Initialize app
        function initializeApp() {
            const now = new Date();
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', { 
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
            });
            loadData();
            updateUI();
            updateMorningView();
        }

        // Load/save data
        function loadData() {
            try {
                // Using memory storage instead of localStorage for Claude.ai compatibility
                if (window.appStorage) {
                    appData = {...appData, ...window.appStorage};
                }
            } catch (e) {
                console.log('Using default data');
            }
        }

        function saveData() {
            try {
                window.appStorage = appData;
            } catch (e) {
                console.log('Data saved to memory');
            }
        }

        // Navigation
        function showView(viewName) {
            const views = ['dashboard', 'statements', 'morning', 'evening', 'nutrition', 'training'];
            views.forEach(view => {
                const element = document.getElementById(view + '-view');
                if (element) element.classList.add('hidden');
            });
            
            const selectedView = document.getElementById(viewName + '-view');
            if (selectedView) selectedView.classList.remove('hidden');
            
            // Update active tab
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => {
                if (tab.onclick && tab.onclick.toString().includes(`showView('${viewName}')`)) {
                    tab.classList.add('active');
                }
            });

            if (viewName === 'morning') updateMorningView();
            if (viewName === 'evening') updateEveningView();
        }

        // Daily reading
        function completeReading() {
            appData.readingCompleted = true;
            saveData();
            updateUI();
            showView('dashboard');
            alert('üìñ Daily reading complete! Your statements are aligned.');
        }

        // Morning ritual functions
        function updateMorningView() {
            const questionNumber = document.getElementById('question-number');
            const questionPercentage = document.getElementById('question-percentage');
            const questionProgress = document.getElementById('question-progress');
            const currentQuestion = document.getElementById('current-question');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const flameIdentification = document.getElementById('flame-identification');
            const morningAnswer = document.getElementById('morning-answer');
            
            if (questionNumber && questionPercentage && questionProgress && currentQuestion) {
                const progress = Math.round(((appData.currentQuestionIndex + 1) / morningQuestions.length) * 100);
                
                questionNumber.textContent = appData.currentQuestionIndex + 1;
                questionPercentage.textContent = progress + '%';
                questionProgress.style.width = progress + '%';
                currentQuestion.textContent = morningQuestions[appData.currentQuestionIndex];
                
                if (prevBtn) prevBtn.style.display = appData.currentQuestionIndex === 0 ? 'none' : 'block';
                if (nextBtn) nextBtn.textContent = appData.currentQuestionIndex === morningQuestions.length - 1 ? 'Complete Questions' : 'Next ‚Üí';
                
                if (flameIdentification) {
                    flameIdentification.style.display = appData.currentQuestionIndex === morningQuestions.length - 1 && appData.morningAnswers.length === morningQuestions.length ? 'block' : 'none';
                }

                // Load saved answer if exists
                if (morningAnswer && appData.morningAnswers[appData.currentQuestionIndex]) {
                    morningAnswer.value = appData.morningAnswers[appData.currentQuestionIndex];
                }
            }
        }

        function previousQuestion() {
            const answer = document.getElementById('morning-answer');
            if (answer) {
                appData.morningAnswers[appData.currentQuestionIndex] = answer.value.trim();
            }
            
            if (appData.currentQuestionIndex > 0) {
                appData.currentQuestionIndex -= 1;
                saveData();
                updateMorningView();
            }
        }

        function nextQuestion() {
            const answer = document.getElementById('morning-answer');
            if (answer && answer.value.trim()) {
                appData.morningAnswers[appData.currentQuestionIndex] = answer.value.trim();
                
                if (appData.currentQuestionIndex < morningQuestions.length - 1) {
                    appData.currentQuestionIndex += 1;
                    answer.value = appData.morningAnswers[appData.currentQuestionIndex] || '';
                    updateMorningView();
                } else {
                    updateMorningView();
                }
                saveData();
            } else {
                alert('Please provide an answer before continuing.');
            }
        }

        function completeMorning() {
            const flameInput = document.getElementById('flame-input');
            const sendToTim = document.getElementById('send-to-tim');
            
            if (flameInput && flameInput.value.trim()) {
                appData.currentFlame = flameInput.value.trim();
                appData.morningCompleted = true;
                saveData();
                updateUI();
                
                if (sendToTim) sendToTim.style.display = 'block';
                alert('üî• Morning ritual completed! Your flame is identified.');
            } else {
                alert('Please identify your flame for today.');
            }
        }

        function sendMorningToTim() {
            const morningData = {
                date: new Date().toISOString().split('T')[0],
                questions: morningQuestions,
                answers: appData.morningAnswers,
                flame: appData.currentFlame
            };
            
            const emailSubject = `Morning Reflection - ${morningData.date}`;
            const emailBody = `Hi Tim,

Here are my morning reflection answers for ${morningData.date}:

${morningQuestions.map((q, i) => `${i + 1}. ${q}\nAnswer: ${appData.morningAnswers[i] || 'No answer provided'}\n`).join('\n')}

Today's Flame: ${appData.currentFlame}

Best regards,
Anthony`;

            // Create mailto link
            const mailtoLink = `mailto:info@timcooperacademy.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
            
            // Also create downloadable file
            const dataStr = JSON.stringify(morningData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `morning-reflection-${morningData.date}.json`;
            link.click();
            
            // Open email client
            window.open(mailtoLink);
            
            alert('üìß Morning answers prepared for Tim! Check your email client and downloads.');
        }

        // Evening ritual functions
        function updateEveningView() {
            const flameReflection = document.getElementById('flame-reflection');
            const eveningFlameText = document.getElementById('evening-flame-text');
            
            if (appData.currentFlame && flameReflection && eveningFlameText) {
                flameReflection.style.display = 'block';
                eveningFlameText.textContent = appData.currentFlame;
            }
        }

        function setScore(domain, score) {
            appData.dailyScores[domain] = score;
            
            // Update button styles
            document.querySelectorAll(`.score-btn[data-domain="${domain}"]`).forEach(btn => {
                btn.style.background = 'white';
                btn.style.color = 'black';
                btn.style.borderColor = '#d1d5db';
            });
            
            const selectedBtn = document.querySelector(`.score-btn[data-domain="${domain}"][data-score="${score}"]`);
            if (selectedBtn) {
                selectedBtn.style.background = '#ea580c';
                selectedBtn.style.color = 'white';
                selectedBtn.style.borderColor = '#ea580c';
            }
            
            saveData();
            updateUI();
        }

        function completeEvening() {
            // Save reflection answers
            const reflections = [];
            for (let i = 1; i <= 6; i++) {
                const reflectionElement = document.getElementById(`reflection${i}`);
                if (reflectionElement) {
                    reflections.push(reflectionElement.value.trim());
                }
            }
            appData.eveningReflections = reflections;
            
            // Save flame reflection
            const flameReflectionElement = document.getElementById('flame-reflection-text');
            if (flameReflectionElement) {
                appData.flameReflection = flameReflectionElement.value.trim();
            }
            
            appData.eveningCompleted = true;
            saveData();
            updateUI();
            
            const sendEveningToTim = document.getElementById('send-evening-to-tim');
            if (sendEveningToTim) sendEveningToTim.style.display = 'block';
            
            alert('üåô Evening ritual completed!');
        }

        function sendEveningToTim() {
            const reflectionQuestions = [
                "A moment that I really appreciated today was...",
                "A situation or task I handled well today was...",
                "Something I realised or learned today was...",
                "I could have made today even better if I...",
                "Something that could have helped me feel more connected...",
                "If I was my own performance coach, I would tell myself..."
            ];
            
            const eveningData = {
                date: new Date().toISOString().split('T')[0],
                reflections: reflectionQuestions.map((q, i) => ({
                    question: q,
                    answer: appData.eveningReflections[i] || 'No answer provided'
                })),
                scores: appData.dailyScores,
                averageScore: (Object.values(appData.dailyScores).reduce((a, b) => a + b, 0) / 6).toFixed(1),
                flame: appData.currentFlame,
                flameReflection: appData.flameReflection,
                weight: appData.currentWeight,
                protein: appData.proteinIntake,
                trainingCompleted: appData.trainingCompleted
            };
            
            const emailSubject = `Evening Reflection - ${eveningData.date}`;
            const emailBody = `Hi Tim,

Here's my evening reflection for ${eveningData.date}:

REFLECTIONS:
${reflectionQuestions.map((q, i) => `${i + 1}. ${q}\nAnswer: ${appData.eveningReflections[i] || 'No answer provided'}\n`).join('\n')}

PERFORMANCE SCORES:
Clarity: ${appData.dailyScores.clarity}/5
Energy: ${appData.dailyScores.energy}/5
Necessity: ${appData.dailyScores.necessity}/5
Productivity: ${appData.dailyScores.productivity}/5
Influence: ${appData.dailyScores.influence}/5
Courage: ${appData.dailyScores.courage}/5
Average: ${eveningData.averageScore}/5

FLAME REFLECTION:
Today's Flame: ${appData.currentFlame}
Reflection: ${appData.flameReflection}

METRICS:
Weight: ${appData.currentWeight}kg
Protein: ${appData.proteinIntake}g
Training: ${appData.trainingCompleted ? 'Completed' : 'Not completed'}

Best regards,
Anthony`;

            // Create mailto link
            const mailtoLink = `mailto:info@timcooperacademy.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
            
            // Also create downloadable file
            const dataStr = JSON.stringify(eveningData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `evening-reflection-${eveningData.date}.json`;
            link.click();
            
            // Open email client
            window.open(mailtoLink);
            
            alert('üìß Evening reflection prepared for Tim! Check your email client and downloads.');
        }

        // Nutrition functions
        function updateProtein() {
            const proteinInput = document.getElementById('protein-input');
            if (proteinInput) {
                appData.proteinIntake = parseInt(proteinInput.value) || 0;
                saveData();
                updateUI();
            }
        }

        function addProtein(amount) {
            appData.proteinIntake += amount;
            document.getElementById('protein-input').value = appData.proteinIntake;
            saveData();
            updateUI();
            if (amount > 20) alert(`‚úì +${amount}g protein logged!`);
        }

        function updateWeight() {
            const weightInput = document.getElementById('weight-input');
            if (weightInput) {
                appData.currentWeight = parseInt(weightInput.value) || 105;
                saveData();
                updateUI();
            }
        }

        function updateThailand() {
            const thailandInput = document.getElementById('thailand-input');
            if (thailandInput) {
                appData.thailandFund = parseInt(thailandInput.value) || 45000;
                saveData();
                updateUI();
            }
        }

        function toggleDayType() {
            appData.isTrainingDay = !appData.isTrainingDay;
            saveData();
            updateUI();
        }

        // Training functions
        function markSetComplete(exerciseNum, setNum) {
            const weightInput = document.getElementById(`ex${exerciseNum}-w${setNum}`);
            const repsInput = document.getElementById(`ex${exerciseNum}-r${setNum}`);
            
            if (weightInput.value && repsInput.value) {
                const exerciseCard = document.getElementById(`exercise-${exerciseNum}`);
                exerciseCard.classList.add('exercise-complete');
                
                // Store the data
                if (!appData.exerciseData[exerciseNum]) {
                    appData.exerciseData[exerciseNum] = {};
                }
                appData.exerciseData[exerciseNum][setNum] = {
                    weight: weightInput.value,
                    reps: repsInput.value
                };
                
                saveData();
                alert(`‚úì Set ${setNum} logged: ${weightInput.value}kg x ${repsInput.value} reps`);
            }
        }

        function toggleTraining() {
            appData.trainingCompleted = !appData.trainingCompleted;
            saveData();
            updateUI();
        }

        // Export function
        function exportData() {
            const exportData = {
                date: new Date().toISOString().split('T')[0],
                ...appData,
                averageScore: (Object.values(appData.dailyScores).reduce((a, b) => a + b, 0) / 6).toFixed(1),
                morningQuestions: morningQuestions,
                morningAnswers: appData.morningAnswers
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `hypertrophy-data-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('üìä Data exported! Share this file with Claude for weekly analysis.');
        }

        // UI updates
        function updateUI() {
            // Update displays
            document.getElementById('current-weight').textContent = appData.currentWeight + 'kg';
            document.getElementById('protein-display').textContent = appData.proteinIntake + 'g';
            document.getElementById('thailand-display').textContent = '$' + appData.thailandFund.toLocaleString();
            
            // Update input fields
            document.getElementById('protein-input').value = appData.proteinIntake;
            document.getElementById('weight-input').value = appData.currentWeight;
            document.getElementById('thailand-input').value = appData.thailandFund;
            
            // Update progress bars
            const weightProgress = Math.round(((105 - appData.currentWeight) / (105 - 98)) * 100);
            const proteinProgress = Math.round((appData.proteinIntake / 265.8) * 100);
            const thailandProgress = Math.round((appData.thailandFund / 150000) * 100);
            
            document.getElementById('weight-progress').style.width = Math.max(0, weightProgress) + '%';
            document.getElementById('protein-progress').style.width = Math.min(100, proteinProgress) + '%';
            document.getElementById('thailand-progress').style.width = Math.min(100, thailandProgress) + '%';
            
            // Update status
            document.getElementById('reading-status').textContent = appData.readingCompleted ? '‚úÖ Complete' : 'üìñ Not Started';
            document.getElementById('morning-status').textContent = appData.morningCompleted ? '‚úÖ Complete' : '‚è∞ Pending';
            document.getElementById('evening-status').textContent = appData.eveningCompleted ? '‚úÖ Complete' : '‚è∞ Pending';
            
            // Update performance score
            const scores = Object.values(appData.dailyScores);
            const average = scores.reduce((a, b) => a + b, 0) / scores.length || 0;
            document.getElementById('average-score').textContent = average.toFixed(1) + '/5';
            
            // Show flame alert
            const flameAlert = document.getElementById('flame-alert');
            if (appData.proteinIntake < 265.8 * 0.8 || !appData.trainingCompleted) {
                flameAlert.style.display = 'block';
            } else {
                flameAlert.style.display = 'none';
            }
            
            // Show current flame
            const flameDisplay = document.getElementById('flame-display');
            const currentFlameText = document.getElementById('current-flame-text');
            if (appData.currentFlame) {
                flameDisplay.style.display = 'block';
                currentFlameText.textContent = appData.currentFlame;
            } else {
                flameDisplay.style.display = 'none';
            }
            
            // Update nutrition adjustments
            const oatsServing = document.getElementById('oats-serving');
            const potatoServing = document.getElementById('potato-serving');
            if (oatsServing && potatoServing) {
                oatsServing.textContent = appData.isTrainingDay ? '80g' : '60g';
                potatoServing.textContent = appData.isTrainingDay ? '200g' : '125g';
            }
            
            // Update day toggle
            const dayToggle = document.getElementById('day-toggle');
            const nutritionTargets = document.getElementById('nutrition-targets');
            if (dayToggle) {
                dayToggle.textContent = appData.isTrainingDay ? 'üèãÔ∏è Training Day' : 'üõå Rest Day';
            }
            if (nutritionTargets) {
                const calories = appData.isTrainingDay ? '2,476' : '2,223';
                nutritionTargets.textContent = `Calories: ${calories} | Protein: 265.8g | Carbs: 274.4g | Fat: 43.8g`;
            }
            
            // Update training status
            const trainingBtn = document.getElementById('training-btn');
            const trainingFlame = document.getElementById('training-flame');
            if (trainingBtn && trainingFlame) {
                if (appData.trainingCompleted) {
                    trainingBtn.textContent = '‚úÖ Session Complete';
                    trainingBtn.style.background = '#16a34a';
                    trainingFlame.style.display = 'none';
                } else {
                    trainingBtn.textContent = 'Complete Training Session';
                    trainingBtn.style.background = '#ea580c';
                    trainingFlame.style.display = 'block';
                }
            }
            
            // Update nutrition flame
            const nutritionFlame = document.getElementById('nutrition-flame');
            const currentProteinAmount = document.getElementById('current-protein-amount');
            if (nutritionFlame && currentProteinAmount) {
                if (appData.proteinIntake < 265.8 * 0.8) {
                    nutritionFlame.style.display = 'block';
                    currentProteinAmount.textContent = appData.proteinIntake;
                } else {
                    nutritionFlame.style.display = 'none';
                }
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
